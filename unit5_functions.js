const unit5Data = {
    general: [
        { title: "[EBS] ì„¸ê³„í…Œë§ˆê¸°í–‰", creator: "EBS Documentary", subject: "ì—¬í–‰; ì„¸ê³„ë¬¸í™”; ë‹¤í", type: "Playlist", url: "https://www.youtube.com/playlist?list=PLvNzObWMMx6vo3PlgF1y42VTUoO6ihSuW" },
        { title: "KBS ê±¸ì–´ì„œ ì„¸ê³„ì†ìœ¼ë¡œ", creator: "KBS", subject: "ì—¬í–‰; ì„¸ê³„ì—¬í–‰; ë‹¤í", type: "Channel", url: "https://www.youtube.com/channel/UCFw4M1BJYYdN1YtS8SzlDzg" },
        { title: "VISITKOREA ê³µì‹ ì±„ë„", creator: "VISITKOREA", subject: "ì—¬í–‰; í•œêµ­ì—¬í–‰; ê´€ê´‘ì •ë³´", type: "Channel", url: "https://www.youtube.com/@visitkorea" },
        { title: "Imagine Your Korea", creator: "í•œêµ­ê´€ê´‘ê³µì‚¬", subject: "ì—¬í–‰; í•œêµ­ì—¬í–‰; ìº í˜ì¸", type: "Channel", url: "https://www.youtube.com/@imagineyourkorea" },
        { title: "VisitSeoul TV", creator: "ì„œìš¸ê´€ê´‘ì¬ë‹¨", subject: "ì—¬í–‰; ì„œìš¸ì—¬í–‰; ê´€ê´‘íŒ", type: "Channel", url: "https://www.youtube.com/c/VisitSeoulTV" },
        { title: "ë¹ ë‹ˆë³´í‹€ Pani Bottle", creator: "ë¹ ë‹ˆë³´í‹€", subject: "ì—¬í–‰; ì„¸ê³„ì—¬í–‰; ë¸Œì´ë¡œê·¸", type: "Channel", url: "https://www.youtube.com/@PaniBottle" },
        { title: "ê³½íŠœë¸Œ", creator: "ê³½íŠœë¸Œ", subject: "ì—¬í–‰; ì„¸ê³„ì—¬í–‰; ë¸Œì´ë¡œê·¸", type: "Channel", url: "https://www.youtube.com/@JBKWAK" },
        { title: "ì²´ì½”ì œ", creator: "ì²´ì½”ì œ", subject: "ì—¬í–‰; ì„¸ê³„ì—¬í–‰; ë¸Œì´ë¡œê·¸", type: "Channel", url: "https://www.youtube.com/@Chae_ko_je" }
    ],
    korea: [
        { query: "ì„œìš¸ ì—¬í–‰ ì •ë³´ ê³µì‹", title: "Discover SEOUL ğŸ‡°ğŸ‡· (ì„œìš¸ ì—¬í–‰ ì •ë³´)", region: "ì„œìš¸", tags: ["ë„ì‹œ", "ê¶ê¶", "ì‡¼í•‘"] },
        { query: "ë¶€ì‚° ì—¬í–‰ ì •ë³´ ê³µì‹", title: "Vibrant BUSAN ğŸŒŠ (ë¶€ì‚° ì—¬í–‰ ì •ë³´)", region: "ë¶€ì‚°", tags: ["í•´ë³€", "ì•¼ê²½", "ë„ì‹œ"] },
        { query: "ì œì£¼ë„ ì—¬í–‰ ì •ë³´ ê³µì‹", title: "Beautiful JEJU ğŸŒ´ (ì œì£¼ë„ ì—¬í–‰ ì •ë³´)", region: "ì œì£¼", tags: ["ìì—°", "ë°”ë‹¤", "íë§"] },
        { query: "ê°•ë¦‰ ì—¬í–‰ ì •ë³´ ê³µì‹", title: "GANGNEUNG Trip â˜• (ê°•ë¦‰ ì—¬í–‰ íƒë°©)", region: "ê°•ë¦‰", tags: ["ë™í•´", "ì»¤í”¼", "í•´ë³€"] },
        { query: "ì „ì£¼ í•œì˜¥ë§ˆì„ ì—¬í–‰ ê³µì‹", title: "Traditional JEONJU ğŸ¯ (ì „ì£¼ì˜ ì „í†µë¯¸)", region: "ì „ì£¼", tags: ["í•œì˜¥", "ìŒì‹", "ë¡œì»¬"] },
        { query: "í•œêµ­ ì „í†µ ìŒì‹ íƒë°© ê³µì‹", title: "KOREAN FOOD Tour ğŸ¥˜ (í•œêµ­ ìŒì‹ íƒë°©)", region: "ì „ì²´", tags: ["K-FOOD", "ë¬¸í™”", "ë§›ì§‘"] },
        { query: "ì¸ì²œê³µí•­ ì‹œì„¤ ë° ì„œë¹„ìŠ¤ ì…êµ­", title: "Incheon Airport Guide (ì¸ì²œê³µí•­ ì•ˆë‚´)", region: "ê³µí•­/ì´ë™", tags: ["ì´ë™", "íŒ", "í¸ì˜"] },
        { query: "Dynamic KOREA Dynamic Seoul official", title: "Dynamic KOREA âš¡ (ë‹¤ì´ë‚´ë¯¹ ì½”ë¦¬ì•„)", region: "ì „ì²´", tags: ["ë¬¸í™”", "ì—­ë™", "ì¶•ì œ"] }
    ],
    continents: {
        asia: [
            { query: "Seoul Travel Guide official", title: "Seoul Travel Guide ğŸ‡°ğŸ‡· (ì„œìš¸ ì—¬í–‰ ê°€ì´ë“œ)", place: "ëŒ€í•œë¯¼êµ­Â·ì„œìš¸", tags: ["ë„ì‹œ", "ì „í†µ", "K-POP"] },
            { query: "Tokyo Travel Guide official", title: "Tokyo Travel Guide ğŸ‡¯ğŸ‡µ (ë„ì¿„ ì—¬í–‰ ê°€ì´ë“œ)", place: "ì¼ë³¸Â·ë„ì¿„", tags: ["ë„ì‹œ", "ì‡¼í•‘", "ë¬¸í™”"] },
            { query: "Bangkok Travel Guide official", title: "Bangkok Travel Guide ğŸ‡¹ğŸ‡­ (ë°©ì½• ì—¬í–‰ ê°€ì´ë“œ)", place: "íƒœêµ­Â·ë°©ì½•", tags: ["ì‚¬ì›", "ìŒì‹", "ì‹œì¥"] },
            { query: "Singapore Travel Guide official", title: "Singapore Travel Guide ğŸ‡¸ğŸ‡¬ (ì‹±ê°€í¬ë¥´ ê°€ì´ë“œ)", place: "ì‹±ê°€í¬ë¥´", tags: ["ë„ì‹œêµ­ê°€", "ì•¼ê²½", "í˜„ëŒ€"] },
            { query: "Bali Travel Guide official", title: "Bali Travel Guide ğŸ‡®ğŸ‡© (ë°œë¦¬ ì—¬í–‰ ê°€ì´ë“œ)", place: "ì¸ë„ë„¤ì‹œì•„Â·ë°œë¦¬", tags: ["íœ´ì–‘", "ìì—°", "ì„œí•‘"] },
            { query: "Dubai Travel Guide official", title: "Dubai Travel Guide ğŸ‡¦ğŸ‡ª (ë‘ë°”ì´ ì—¬í–‰ ê°€ì´ë“œ)", place: "ì•„ëì—ë¯¸ë¦¬íŠ¸Â·ë‘ë°”ì´", tags: ["ë„ì‹œ", "ì´ˆí˜„ëŒ€", "ì‚¬ë§‰"] },
            { query: "Hong Kong Travel Guide official", title: "Hong Kong Travel Guide ğŸ‡­ğŸ‡° (í™ì½© ì—¬í–‰ ê°€ì´ë“œ)", place: "í™ì½©", tags: ["ì•¼ê²½", "ì‡¼í•‘", "ë¯¸ì‹"] },
            { query: "Istanbul Travel Guide official", title: "Istanbul Travel Guide ğŸ‡¹ğŸ‡· (ì´ìŠ¤íƒ„ë¶ˆ ê°€ì´ë“œ)", place: "íŠ€ë¥´í‚¤ì˜ˆÂ·ì´ìŠ¤íƒ„ë¶ˆ", tags: ["ì—­ì‚¬", "ë¬¸í™”", "ì‹œì¥"] }
        ],
        europe: [
            { query: "Paris Travel Guide official 4k", title: "Paris Travel Guide ğŸ‡«ğŸ‡· (íŒŒë¦¬ ì—¬í–‰ ê°€ì´ë“œ)", place: "í”„ë‘ìŠ¤Â·íŒŒë¦¬", tags: ["ì—í íƒ‘", "ì˜ˆìˆ ", "ë¯¸ì‹"] },
            { query: "London Travel Guide official 4k", title: "London Travel Guide ğŸ‡¬ğŸ‡§ (ëŸ°ë˜ ì—¬í–‰ ê°€ì´ë“œ)", place: "ì˜êµ­Â·ëŸ°ë˜", tags: ["ë¹…ë²¤", "ì „í†µ", "ì‡¼í•‘"] },
            { query: "Rome Travel Guide official 4k", title: "Rome Travel Guide ğŸ‡®ğŸ‡¹ (ë¡œë§ˆ ì—¬í–‰ ê°€ì´ë“œ)", place: "ì´íƒˆë¦¬ì•„Â·ë¡œë§ˆ", tags: ["ì—­ì‚¬", "ì½œë¡œì„¸ì›€", "ìœ ì "] },
            { query: "Venice Travel Guide official 4k", title: "Venice Travel Guide ğŸ‡®ğŸ‡¹ (ë² ë„¤ì¹˜ì•„ ê°€ì´ë“œ)", place: "ì´íƒˆë¦¬ì•„Â·ë² ë„¤ì¹˜ì•„", tags: ["ìš´í•˜", "ë‚­ë§Œ", "ë¬¼"] },
            { query: "Barcelona Travel Guide official 4k", title: "Barcelona Travel Guide ğŸ‡ªğŸ‡¸ (ë°”ë¥´ì…€ë¡œë‚˜ ê°€ì´ë“œ)", place: "ìŠ¤í˜ì¸Â·ë°”ë¥´ì…€ë¡œë‚˜", tags: ["ê°€ìš°ë””", "í•´ë³€", "ì˜ˆìˆ "] },
            { query: "Prague Travel Guide official 4k", title: "Prague Travel Guide ğŸ‡¨ğŸ‡¿ (í”„ë¼í•˜ ê°€ì´ë“œ)", place: "ì²´ì½”Â·í”„ë¼í•˜", tags: ["ì•¼ê²½", "ì¤‘ì„¸", "ë‚­ë§Œ"] },
            { query: "Swiss Alps Vacation Travel Guide official", title: "Swiss Alps Guide ğŸ‡¨ğŸ‡­ (ìŠ¤ìœ„ìŠ¤ ì•Œí”„ìŠ¤ ê°€ì´ë“œ)", place: "ìŠ¤ìœ„ìŠ¤Â·ì•Œí”„ìŠ¤", tags: ["ìì—°", "ë§Œë…„ì„¤", "íë§"] },
            { query: "Athens Travel Guide official 4k", title: "Athens Travel Guide ğŸ‡¬ğŸ‡· (ì•„í…Œë„¤ ê°€ì´ë“œ)", place: "ê·¸ë¦¬ìŠ¤Â·ì•„í…Œë„¤", tags: ["ì‹ í™”", "ì—­ì‚¬", "ìœ ì "] }
        ],
        africa: [
            { query: "Namibia Travel Guide official 4k", title: "Namibia Guide ğŸ‡³ğŸ‡¦ (ë‚˜ë¯¸ë¹„ì•„ ê°€ì´ë“œ)", place: "ë‚˜ë¯¸ë¹„ì•„", tags: ["ì‚¬ë§‰", "ì‚¬íŒŒë¦¬", "ìì—°"] },
            { query: "Cape Town Travel Guide official 4k", title: "Cape Town Guide ğŸ‡¿ğŸ‡¦ (ì¼€ì´í”„íƒ€ìš´ ê°€ì´ë“œ)", place: "ë‚¨ì•„ê³µÂ·ì¼€ì´í”„íƒ€ìš´", tags: ["í•´ì•ˆ", "ë„ì‹œ", "ëœë“œë§ˆí¬"] },
            { query: "Serengeti Safari official 4k", title: "Serengeti Safari ğŸ‡¹ğŸ‡¿ (ì„¸ë ê²Œí‹° ì‚¬íŒŒë¦¬)", place: "íƒ„ìë‹ˆì•„Â·ì„¸ë ê²Œí‹°", tags: ["ë™ë¬¼", "ì´ˆì›", "ëŒ€ìì—°"] },
            { query: "Egypt Travel Guide official 4k", title: "Egypt Travel Guide ğŸ‡ªğŸ‡¬ (ì´ì§‘íŠ¸ ê°€ì´ë“œ)", place: "ì´ì§‘íŠ¸Â·ì¹´ì´ë¡œ", tags: ["í”¼ë¼ë¯¸ë“œ", "ì—­ì‚¬", "ë‚˜ì¼ê°•"] },
            { query: "Morocco Travel Guide official 4k", title: "Morocco Travel Guide ğŸ‡²ğŸ‡¦ (ëª¨ë¡œì½” ê°€ì´ë“œ)", place: "ëª¨ë¡œì½”Â·ë§ˆë¼ì¼€ì‹œ", tags: ["ë¬¸í™”", "ì‹œì¥", "ì „í†µ"] },
            { query: "Mauritius Travel Guide official 4k", title: "Mauritius Travel Guide ğŸ‡²ğŸ‡º (ëª¨ë¦¬ì…”ìŠ¤ ê°€ì´ë“œ)", place: "ëª¨ë¦¬ì…”ìŠ¤", tags: ["ì„¬", "íœ´ì–‘", "ì—ë©”ë„ë“œ"] }
        ],
        northamerica: [
            { query: "New York City Guide official 4k", title: "New York City Guide ğŸ‡ºğŸ‡¸ (ë‰´ìš• ê°€ì´ë“œ)", place: "ë¯¸êµ­Â·ë‰´ìš•", tags: ["íƒ€ì„ìŠ¤í€˜ì–´", "ëœë“œë§ˆí¬", "ë„ì‹œ"] },
            { query: "Los Angeles Guide official 4k", title: "Los Angeles Guide ğŸ‡ºğŸ‡¸ (ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤ ê°€ì´ë“œ)", place: "ë¯¸êµ­Â·LA", tags: ["í• ë¦¬ìš°ë“œ", "í•´ë³€", "ì˜í™”"] },
            { query: "Vancouver Travel Guide official 4k", title: "Vancouver Travel Guide ğŸ‡¨ğŸ‡¦ (ë°´ì¿ ë²„ ê°€ì´ë“œ)", place: "ìºë‚˜ë‹¤Â·ë°´ì¿ ë²„", tags: ["ìì—°", "ë„ì‹œ", "í‰í™”"] },
            { query: "Grand Canyon Guide official 4k", title: "Grand Canyon Guide ğŸ‡ºğŸ‡¸ (ê·¸ëœë“œ ìºë‹ˆì–¸)", place: "ë¯¸êµ­Â·ë‚˜ë°”í˜¸", tags: ["ëŒ€í˜‘ê³¡", "ìì—°", "ê²½ì´ë¡œì›€"] },
            { query: "San Francisco Guide official 4k", title: "San Francisco Guide ğŸ‡ºğŸ‡¸ (ìƒŒí”„ë€ì‹œìŠ¤ì½” ê°€ì´ë“œ)", place: "ë¯¸êµ­Â·SF", tags: ["ê¸ˆë¬¸êµ", "ì•ˆê°œ", "ììœ "] },
            { query: "Mexico City Guide official 4k", title: "Mexico City Guide ğŸ‡²ğŸ‡½ (ë©•ì‹œì½”ì‹œí‹° ê°€ì´ë“œ)", place: "ë©•ì‹œì½”Â·ì‹œí‹°", tags: ["ì—­ì‚¬", "ë¬¸í™”", "ì •ì—´"] }
        ],
        southamerica: [
            { query: "Machu Picchu Guide official 4k", title: "Machu Picchu Guide ğŸ‡µğŸ‡ª (ë§ˆì¶”í”½ì¶” ê°€ì´ë“œ)", place: "í˜ë£¨Â·ë§ˆì¶”í”½ì¶”", tags: ["ì‰ì¹´", "ì—­ì‚¬", "ì‹ ë¹„"] },
            { query: "Rio de Janeiro Guide official 4k", title: "Rio de Janeiro Guide ğŸ‡§ğŸ‡· (ë¦¬ìš° ê°€ì´ë“œ)", place: "ë¸Œë¼ì§ˆÂ·ë¦¬ìš°", tags: ["ì •ì—´", "ì˜ˆìˆ˜ìƒ", "í•´ë³€"] },
            { query: "Buenos Aires Travel Guide official 4k", title: "Buenos Aires Guide ğŸ‡¦ğŸ‡· (ë¶€ì—ë…¸ìŠ¤ì•„ì´ë ˆìŠ¤)", place: "ì•„ë¥´í—¨í‹°ë‚˜Â·ì‹œí‹°", tags: ["íƒ±ê³ ", "ë¬¸í™”", "ì—´ì •"] },
            { query: "Iguazu Falls Guide official 4k", title: "Iguazu Falls Guide ğŸ‡§ğŸ‡·ğŸ‡¦ğŸ‡· (ì´êµ¬ì•„ìˆ˜ í­í¬)", place: "ë‚¨ë¯¸Â·í­í¬", tags: ["ìì—°", "í­í¬", "ê²½ì´ë¡œì›€"] },
            { query: "Galapagos Islands Guide official 4k", title: "Galapagos Islands Guide ğŸ‡ªğŸ‡¨ (ê°ˆë¼íŒŒê³ ìŠ¤)", place: "ì—ì½°ë„ë¥´Â·ì„¬", tags: ["ìƒíƒœ", "ì§„í™”", "ìì—°"] },
            { query: "Salar de Uyuni Guide official 4k", title: "Salar de Uyuni Guide ğŸ‡§ğŸ‡´ (ìš°ìœ ë‹ˆ ì‚¬ë§‰)", place: "ë³¼ë¦¬ë¹„ì•„Â·ìš°ìœ ë‹ˆ", tags: ["ì†Œê¸ˆì‚¬ë§‰", "ë¹„í˜„ì‹¤", "ê±°ìš¸"] }
        ],
        oseania: [
            { query: "Sydney Travel Guide official 4k", title: "Sydney Travel Guide ğŸ‡¦ğŸ‡º (ì‹œë“œë‹ˆ ê°€ì´ë“œ)", place: "í˜¸ì£¼Â·ì‹œë“œë‹ˆ", tags: ["ì˜¤í˜ë¼í•˜ìš°ìŠ¤", "í•­êµ¬", "ë„ì‹œ"] },
            { query: "Melbourne Travel Guide official 4k", title: "Melbourne Travel Guide ğŸ‡¦ğŸ‡º (ë©œë²„ë¥¸ ê°€ì´ë“œ)", place: "í˜¸ì£¼Â·ë©œë²„ë¥¸", tags: ["ë¬¸í™”", "ì»¤í”¼", "ì˜ˆìˆ "] },
            { query: "Queenstown Travel Guide official 4k", title: "Queenstown Guide ğŸ‡³ğŸ‡¿ (í€¸ìŠ¤íƒ€ìš´ ê°€ì´ë“œ)", place: "ë‰´ì§ˆëœë“œÂ·í€¸ìŠ¤íƒ€ìš´", tags: ["ì•¡í‹°ë¹„í‹°", "ìì—°", "í˜¸ìˆ˜"] },
            { query: "Gold Coast Guide official 4k", title: "Gold Coast Guide ğŸ‡¦ğŸ‡º (ê³¨ë“œì½”ìŠ¤íŠ¸ ê°€ì´ë“œ)", place: "í˜¸ì£¼Â·í•´ë³€", tags: ["ì„œí•‘", "í•´ë³€", "íœ´ì–‘"] },
            { query: "Auckland Travel Guide official 4k", title: "Auckland Travel Guide ğŸ‡³ğŸ‡¿ (ì˜¤í´ëœë“œ ê°€ì´ë“œ)", place: "ë‰´ì§ˆëœë“œÂ·ì˜¤í´ëœë“œ", tags: ["í•­í•´", "ë„ì‹œ", "í™”ì‚°"] },
            { query: "Fiji Islands Guide official 4k", title: "Fiji Islands Guide ğŸ‡«ğŸ‡¯ (í”¼ì§€ ì œë„ ê°€ì´ë“œ)", place: "í”¼ì§€Â·ì„¬", tags: ["ë‚™ì›", "ìŠ¤ë…¸í´ë§", "íœ´ì–‘"] }
        ]
    }
};

function renderUnit5Main() {
    const container = document.getElementById('unit5-content');
    container.innerHTML = `
        <div class="step-grid">
            <div class="step-card card" style="cursor: pointer; border-color: var(--primary);" onclick="renderUnit5GeneralChoice()">
                <span class="step-icon">ğŸŒ</span>
                <span class="step-title" style="color: var(--primary-dark);">ì¢…í•© ë° í•œêµ­ ì—¬í–‰</span>
                <p>í‚¤ì›Œë“œ ì±„ë„ ì†Œê°œ ë° í•œêµ­ ì—¬í–‰ í•„ìˆ˜ ì˜ìƒ ìë£Œ</p>
            </div>
            <div class="step-card card" style="cursor: pointer; border-color: var(--primary);" onclick="renderUnit5WorldMap()">
                <span class="step-icon">ğŸ—ºï¸</span>
                <span class="step-title" style="color: var(--primary-dark);">ì„¸ê³„ ëŒ€ë¥™ë³„ ì—¬í–‰</span>
                <p>ì§€ë„ë¥¼ í†µí•´ íƒí—˜í•˜ëŠ” ì „ ì„¸ê³„ ëŒ€ë¥™ë³„ ì—¬í–‰ ì˜ìƒ</p>
            </div>
        </div>
    `;
}

function renderUnit5GeneralChoice() {
    const container = document.getElementById('unit5-content');
    container.innerHTML = `
        <div style="margin-bottom:20px;">
            <button class="sub-nav-btn" onclick="renderUnit5Main()">â† ì²˜ìŒìœ¼ë¡œ</button>
        </div>
        <div class="step-grid">
            <div class="step-card card" style="cursor: pointer; border-color: #87CEEB;" onclick="renderUnit5VideoGrid('general')">
                <span class="step-icon">ğŸ“º</span>
                <span class="step-title" style="color: var(--primary-dark);">ì—¬í–‰ í‚¤ì›Œë“œ ì±„ë„</span>
                <p>ì¬ë¯¸ìˆëŠ” ì—¬í–‰ ì§€ë¦¬ ì˜ìƒê³¼ ìœ ìš©í•œ í•™ìŠµ ì±„ë„!</p>
            </div>
            <div class="step-card card" style="cursor: pointer; border-color: #A8E6CF;" onclick="renderUnit5VideoGrid('korea')">
                <span class="step-icon">ğŸ‡°ğŸ‡·</span>
                <span class="step-title" style="color: var(--primary-dark);">í•œêµ­ ì—¬í–‰ ìë£Œ</span>
                <p>ìš°ë¦¬ë‚˜ë¼ êµ¬ì„êµ¬ì„ì˜ ì•„ë¦„ë‹¤ìš´ í’ê²½ë“¤ì„ ë§Œë‚˜ìš”!</p>
            </div>
        </div>
    `;
}

function renderUnit5WorldMap() {
    const container = document.getElementById('unit5-content');
    container.innerHTML = `
        <div style="margin-bottom:20px;">
            <button class="sub-nav-btn" onclick="renderUnit5Main()">â† ì²˜ìŒìœ¼ë¡œ</button>
        </div>
        <div class="intro-box" style="background: white;">
            <h2 style="text-align:center; color: var(--primary-dark); font-family:'Gamja Flower'; font-size: 2.2rem; margin-bottom: 15px;">ì„¸ê³„ ëŒ€ë¥™ë³„ ì—¬í–‰ íƒí—˜</h2>
            <div class="world-map-svg-wrapper" style="width:100%; max-width:800px; margin:0 auto;">
                <svg viewBox="0 0 1000 600" xmlns="http://www.w3.org/2000/svg" style="width:100%; height:auto;">
                    <style>
                        .continent-group { cursor: pointer; transition: 0.3s; }
                        .continent-path { fill: rgba(135, 206, 235, 0.15); stroke: var(--primary); stroke-width: 2; stroke-dasharray: 4; }
                        .continent-group:hover .continent-path { fill: rgba(93, 173, 226, 0.3); stroke-dasharray: 0; filter: drop-shadow(0 0 10px var(--shadow)); }
                        .label-bg { fill: var(--primary); }
                        .label-text { fill: white; font-family: 'Jua'; font-size: 14px; pointer-events: none; font-weight: bold; }
                        .map-emoji { font-size: 28px; pointer-events: none; opacity: 0.8; transition: 0.3s; transform-origin: center; transform-box: fill-box; }
                        .continent-group:hover .map-emoji { opacity: 1; transform: scale(1.3); }
                    </style>
                    <g class="continent-group" onclick="renderUnit5VideoGrid('continents', 'asia')">
                        <path class="continent-path" d="M260,60 C430,50 610,60 680,110 C720,180 710,340 640,400 C560,430 400,410 310,360 C270,300 240,160 260,60 Z" />
                        <rect x="560" y="180" width="90" height="28" rx="14" class="label-bg" />
                        <text x="605" y="199" class="label-text" text-anchor="middle">ASIA</text>
                        <text x="400" y="120" class="map-emoji">ğŸ¼</text>
                        <text x="560" y="130" class="map-emoji">ğŸ¯</text>
                        <text x="500" y="250" class="map-emoji">ğŸ˜</text>
                        <text x="640" y="320" class="map-emoji">ğŸœ</text>
                        <text x="320" y="220" class="map-emoji">ğŸµ</text>
                    </g>
                    <g class="continent-group" onclick="renderUnit5VideoGrid('continents', 'europe')">
                        <path class="continent-path" d="M30,90 C90,70 170,65 220,80 C250,110 250,170 210,210 C160,240 90,230 60,190 C40,150 30,110 30,90 Z" />
                        <rect x="120" y="145" width="90" height="28" rx="14" class="label-bg" />
                        <text x="165" y="164" class="label-text" text-anchor="middle">EUROPE</text>
                        <text x="140" y="110" class="map-emoji">ğŸ—¼</text>
                        <text x="190" y="130" class="map-emoji">ğŸ•</text>
                        <text x="90" y="160" class="map-emoji">ğŸ°</text>
                        <text x="60" y="120" class="map-emoji">ğŸ¥¨</text>
                    </g>
                    <g class="continent-group" onclick="renderUnit5VideoGrid('continents', 'africa')">
                        <path class="continent-path" d="M50,250 C110,240 180,235 220,250 C260,290 270,410 230,530 C180,560 120,550 80,520 C40,450 30,320 50,250 Z" />
                        <rect x="75" y="325" width="90" height="28" rx="14" class="label-bg" />
                        <text x="120" y="344" class="label-text" text-anchor="middle">AFRICA</text>
                        <text x="100" y="290" class="map-emoji">ğŸ¦</text>
                        <text x="180" y="300" class="map-emoji">ğŸ¦’</text>
                        <text x="150" y="450" class="map-emoji">ğŸœï¸</text>
                        <text x="80" y="420" class="map-emoji">ğŸ¥</text>
                        <text x="210" y="400" class="map-emoji">ğŸ¦“</text>
                    </g>
                    <g class="continent-group" onclick="renderUnit5VideoGrid('continents', 'northamerica')">
                        <path class="continent-path" d="M780,90 C840,75 940,85 990,140 C980,190 940,250 900,270 C840,295 780,295 750,250 C730,200 740,130 780,90 Z" />
                        <rect x="745" y="145" width="130" height="28" rx="14" class="label-bg" />
                        <text x="810" y="164" class="label-text" text-anchor="middle">NORTH AMERICA</text>
                        <text x="820" y="110" class="map-emoji">ğŸ—½</text>
                        <text x="880" y="150" class="map-emoji">ğŸ”</text>
                        <text x="760" y="180" class="map-emoji">ğŸˆ</text>
                        <text x="840" y="240" class="map-emoji">ğŸ</text>
                        <text x="940" y="220" class="map-emoji">ğŸ¤ </text>
                    </g>
                    <g class="continent-group" onclick="renderUnit5VideoGrid('continents', 'southamerica')">
                        <path class="continent-path" d="M860,310 C920,310 980,320 990,340 C1000,390 990,490 960,570 C920,590 880,590 850,560 C820,510 810,410 840,310 Z" />
                        <rect x="830" y="385" width="130" height="28" rx="14" class="label-bg" />
                        <text x="895" y="404" class="label-text" text-anchor="middle">SOUTH AMERICA</text>
                        <text x="910" y="350" class="map-emoji">ğŸ¦œ</text>
                        <text x="870" y="450" class="map-emoji">âš½</text>
                        <text x="940" y="480" class="map-emoji">ğŸ’ƒ</text>
                        <text x="900" y="550" class="map-emoji">ğŸŒµ</text>
                        <text x="840" y="520" class="map-emoji">ğŸ¦™</text>
                    </g>
                    <g class="continent-group" onclick="renderUnit5VideoGrid('continents', 'oseania')">
                        <path class="continent-path" d="M550,430 C620,425 700,435 730,450 C750,480 740,550 700,570 C640,590 570,585 540,550 C510,510 520,460 550,420 Z" />
                        <rect x="600" y="475" width="105" height="28" rx="14" class="label-bg" />
                        <text x="652.5" y="494" class="label-text" text-anchor="middle">OCEANIA</text>
                        <text x="580" y="460" class="map-emoji">ğŸ¦˜</text>
                        <text x="680" y="440" class="map-emoji">ğŸ¨</text>
                        <text x="620" y="560" class="map-emoji">ğŸ„</text>
                        <text x="540" y="520" class="map-emoji">ğŸŒ´</text>
                        <text x="700" y="530" class="map-emoji">ğŸ³</text>
                    </g>
                </svg>
            </div>
        </div>
    `;
}

function renderUnit5VideoGrid(category, subCategory = null) {
    const container = document.getElementById('unit5-content');
    let items = [];
    let title = "";
    let backFunc = "";

    if (category === 'general') {
        items = unit5Data.general;
        title = "ì—¬í–‰ í‚¤ì›Œë“œ ì±„ë„";
        backFunc = "renderUnit5GeneralChoice()";
    } else if (category === 'korea') {
        items = unit5Data.korea;
        title = "ëŒ€í•œë¯¼êµ­ ì—¬í–‰ íƒí—˜";
        backFunc = "renderUnit5GeneralChoice()";
    } else if (category === 'continents') {
        items = unit5Data.continents[subCategory];
        const names = {
            asia: "ì•„ì‹œì•„", europe: "ìœ ëŸ½", africa: "ì•„í”„ë¦¬ì¹´",
            northamerica: "ë¶ì•„ë©”ë¦¬ì¹´", southamerica: "ë‚¨ì•„ë©”ë¦¬ì¹´", oseania: "ì˜¤ì„¸ì•„ë‹ˆì•„"
        };
        title = (names[subCategory] || subCategory.toUpperCase()) + " ì—¬í–‰ íƒí—˜";
        backFunc = "renderUnit5WorldMap()";
    }

    container.innerHTML = `
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <button class="sub-nav-btn" onclick="${backFunc}" style="margin:0;">â† ë’¤ë¡œ ê°€ê¸°</button>
            <h2 style="font-family:'Gamja Flower'; color:var(--primary-dark); font-size:2.2rem;">${title}</h2>
        </div>
        <div class="input-group" style="margin-bottom:25px;">
            <input type="text" id="unit5-search" placeholder="ë³´ê³  ì‹¶ì€ ë‚˜ë¼ë‚˜ ë„ì‹œë¥¼ ê²€ìƒ‰í•´ ë³´ì„¸ìš”..." style="width:100%; border:3px solid var(--primary);" oninput="filterUnit5Videos('${category}', '${subCategory}')">
        </div>
        <div id="unit5-video-grid" class="step-grid">
            ${renderVideoCards(items)}
        </div>
    `;
}

function renderVideoCards(items) {
    return items.map(it => {
        const url = it.url || `https://www.youtube.com/results?search_query=${encodeURIComponent(it.query || it.title)}`;
        const typeLabel = it.type ? `<span style="font-size:0.75rem; background:var(--primary); color:white; padding:4px 10px; border-radius:999px; margin-bottom:8px; display:inline-block; font-family:'Jua';">${it.type}</span>` : "";
        const rawTags = it.tags || (it.subject ? it.subject.split(';') : []);
        const tags = rawTags.map(t => `<span style="font-size:0.8rem; color:var(--primary-dark); background:white; padding:4px 12px; border-radius:999px; border:1px solid var(--primary); font-family:'Jua';">#${t.trim()}</span>`).join(" ");

        return `
            <div class="act-card" style="display:flex; flex-direction:column; gap:10px; background:white; cursor:pointer;" onclick="window.open('${url}', '_blank', 'noopener')">
                <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                    ${typeLabel}
                </div>
                <div style="font-weight:bold; font-size:1.2rem; color:var(--text-dark); font-family:'Jua';">${it.title}</div>
                <div style="color:#7B8D93; font-size:0.95rem; font-family:'Jua';">ğŸ“ ${it.place || it.region || it.creator}</div>
                <div style="display:flex; flex-wrap:wrap; gap:8px; margin:5px 0;">${tags}</div>
                <a href="${url}" target="_blank" rel="noopener" class="login-btn" onclick="event.stopPropagation();" style="margin-top:auto; text-align:center; text-decoration:none; display:block; padding:10px; font-size:1rem; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">ğŸ“º ìœ íŠœë¸Œì—ì„œ ë³´ê¸°</a>
            </div>
        `;
    }).join("");
}

function filterUnit5Videos(category, subCategory) {
    const query = document.getElementById('unit5-search').value.toLowerCase();
    let items = category === 'continents' ? unit5Data.continents[subCategory] : unit5Data[category];

    const filtered = items.filter(it => {
        const searchText = `${it.title} ${it.place || ''} ${it.region || ''} ${it.creator || ''} ${(it.tags || [it.subject]).join(" ")}`.toLowerCase();
        return searchText.includes(query);
    });

    document.getElementById('unit5-video-grid').innerHTML = renderVideoCards(filtered);
}
